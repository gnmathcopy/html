<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, shrink-to-fit=no">
  <title>1 on 1 Soccer | MacVG</title>
  <style>
    body { margin: 0; overflow: hidden; background: #000; }
    #loader {
      position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
      color: white; font-family: sans-serif; z-index: 1000;
    }
    #gameCanvas, #orientation, #content {
      position: absolute; top:0; left:0; width:100%; height:100%;
    }
  </style>
</head>
<body>
  <div id="loader">Loading ...</div>
  <div id="orientation"></div>
  <div id="gameCanvas"></div>
  <div id="content"></div>

<script>
(async function() {
  const files = [
    "version.js",
    "1-on-1-soccer.min.js",
    "css/stylesheet.css",
    "patch/cdn/phaser/phaser-spine.min.js",
    "patch/cdn/phaser/phaser-ads.min.js",
    "patch/cdn/phaser/phaser-cachebuster.min.js",
    "patch/cdn/kizi/splash.js"
  ];

  function getCDNUrl(path) {
    return `https://cdn.jsdelivr.net/gh/gnmathcopy/assets@main/567/${path}`;
  }

  // Создаём все контейнеры, если их нет
  const requiredIds = ["content", "gameCanvas", "loader", "orientation"];
  requiredIds.forEach(id => {
    if (!document.getElementById(id)) {
      const div = document.createElement("div");
      div.id = id;
      document.body.appendChild(div);
    }
  });

  // Загружаем CSS
  const link = document.createElement("link");
  link.rel = "stylesheet";
  link.href = getCDNUrl("css/stylesheet.css");
  document.head.appendChild(link);

  // Функция для загрузки скриптов
  function loadScript(url) {
    return new Promise((resolve, reject) => {
      const s = document.createElement('script');
      s.src = url + "?v=" + Date.now();
      s.onload = () => resolve();
      s.onerror = e => reject(new Error(`Не удалось загрузить скрипт: ${url}`));
      document.body.appendChild(s);
    });
  }

  try {
    // Загружаем version.js
    await loadScript(getCDNUrl("version.js"));
    // Загружаем основной скрипт игры
    await loadScript(getCDNUrl("1-on-1-soccer.min.js"));
    console.log("✅ Игра загружена. Можно играть!");
    // Убираем loader
    const loader = document.getElementById("loader");
    if (loader) loader.style.display = "none";
  } catch(e) {
    console.error("Ошибка загрузки игры:", e);
  }
})();
</script>
</body>
</html>
